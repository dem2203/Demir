<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEMIR AI v6.0 - Trader Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <div class="header-left">
                <h1>ü§ñ DEMIR AI v6.0 - TRADER DASHBOARD</h1>
                <p class="subtitle">Ger√ßek Zamanlƒ± Sinyal Analizi & ƒ∞≈ülem Takibi</p>
            </div>
            <div class="header-right">
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Baƒülantƒ± kontrol ediliyor...</span>
                </div>
                <button class="theme-toggle" id="themeToggle">üåô Dark</button>
            </div>
        </header>

        <!-- GOLDEN RULES BANNER -->
        <div class="golden-banner">
            <span>‚≠ê GOLDEN RULES ACTIVE:</span>
            <span>‚úÖ Ger√ßek Veri</span> | 
            <span>‚úÖ Mock/Fake YOK</span> | 
            <span>‚úÖ Validator Aktif</span> | 
            <span>‚úÖ Exchange Verified</span>
        </div>

        <!-- NAV TABS -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="signals">üìä Sƒ∞NYALLER</button>
            <button class="tab-btn" data-tab="analysis">üìà ANALƒ∞Z</button>
            <button class="tab-btn" data-tab="history">üìã TARƒ∞H</button>
            <button class="tab-btn" data-tab="settings">‚öôÔ∏è AYARLAR</button>
        </nav>

        <!-- TAB: Sƒ∞NYALLER -->
        <div id="signals" class="tab-content active">
            <!-- COINS TOOLBAR -->
            <div class="coins-toolbar">
                <div class="coins-list" id="coinsList">
                    <button class="coin-btn active" data-coin="BTCUSDT">‚Çø BTC/USDT</button>
                    <button class="coin-btn" data-coin="ETHUSDT">Œû ETH/USDT</button>
                    <button class="coin-btn" data-coin="LTCUSDT">≈Å LTC/USDT</button>
                </div>
                <button class="btn-add-coin" id="addCoinBtn">+ Coin Ekle</button>
            </div>

            <!-- PRICE DISPLAY -->
            <div class="price-section">
                <div class="price-card">
                    <h3 id="selectedCoin">BTC/USDT</h3>
                    <div class="price-display">
                        <span class="price" id="currentPrice">-</span>
                        <span class="change" id="priceChange">-</span>
                    </div>
                    <div class="source-badge">
                        <span id="dataSource">Veri kaynaƒüƒ±: Kontrol ediliyor...</span>
                    </div>
                </div>
            </div>

            <!-- 4-GROUP SIGNALS SECTION -->
            <div class="signals-grid">
                <!-- TECHNICAL GROUP -->
                <div class="signal-card technical">
                    <div class="card-header">
                        <h3>üìä TEKNƒ∞K ANALƒ∞Z</h3>
                        <span class="group-label">28 Layer</span>
                    </div>
                    <div class="signal-content">
                        <div class="signal-direction" id="techDirection">-</div>
                        <div class="signal-bars">
                            <div class="bar-container">
                                <div class="bar-label">G√º√ß</div>
                                <div class="bar" style="width: 0%;" id="techStrengthBar"></div>
                                <span class="bar-value" id="techStrength">0%</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-label">G√ºven</div>
                                <div class="bar" style="width: 0%;" id="techConfidenceBar"></div>
                                <span class="bar-value" id="techConfidence">0%</span>
                            </div>
                        </div>
                        <div class="signal-layers" id="techLayers">Aktif Layer: 0/28</div>
                        <div class="signal-explanation" id="techExplanation">-</div>
                    </div>
                </div>

                <!-- SENTIMENT GROUP -->
                <div class="signal-card sentiment">
                    <div class="card-header">
                        <h3>üí≠ SENTIMENT</h3>
                        <span class="group-label">20 Layer</span>
                    </div>
                    <div class="signal-content">
                        <div class="signal-direction" id="sentimentDirection">-</div>
                        <div class="signal-bars">
                            <div class="bar-container">
                                <div class="bar-label">G√º√ß</div>
                                <div class="bar" style="width: 0%;" id="sentimentStrengthBar"></div>
                                <span class="bar-value" id="sentimentStrength">0%</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-label">G√ºven</div>
                                <div class="bar" style="width: 0%;" id="sentimentConfidenceBar"></div>
                                <span class="bar-value" id="sentimentConfidence">0%</span>
                            </div>
                        </div>
                        <div class="signal-layers" id="sentimentLayers">Aktif Layer: 0/20</div>
                        <div class="signal-explanation" id="sentimentExplanation">-</div>
                    </div>
                </div>

                <!-- ONCHAIN GROUP -->
                <div class="signal-card onchain">
                    <div class="card-header">
                        <h3>‚õìÔ∏è Zƒ∞NCƒ∞R ANALƒ∞Zƒ∞</h3>
                        <span class="group-label">6 Layer</span>
                    </div>
                    <div class="signal-content">
                        <div class="signal-direction" id="onchainDirection">-</div>
                        <div class="signal-bars">
                            <div class="bar-container">
                                <div class="bar-label">G√º√ß</div>
                                <div class="bar" style="width: 0%;" id="onchainStrengthBar"></div>
                                <span class="bar-value" id="onchainStrength">0%</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-label">G√ºven</div>
                                <div class="bar" style="width: 0%;" id="onchainConfidenceBar"></div>
                                <span class="bar-value" id="onchainConfidence">0%</span>
                            </div>
                        </div>
                        <div class="signal-layers" id="onchainLayers">Aktif Layer: 0/6</div>
                        <div class="signal-explanation" id="onchainExplanation">-</div>
                    </div>
                </div>

                <!-- MACRO RISK GROUP -->
                <div class="signal-card macro">
                    <div class="card-header">
                        <h3>‚ö†Ô∏è MAKRO Rƒ∞SK</h3>
                        <span class="group-label">14 Layer</span>
                    </div>
                    <div class="signal-content">
                        <div class="signal-direction" id="macroDirection">-</div>
                        <div class="signal-bars">
                            <div class="bar-container">
                                <div class="bar-label">Volatilite</div>
                                <div class="bar" style="width: 0%;" id="macroVolBar"></div>
                                <span class="bar-value" id="macroVol">0%</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-label">Risk</div>
                                <div class="bar" style="width: 0%;" id="macroRiskBar"></div>
                                <span class="bar-value" id="macroRisk">0%</span>
                            </div>
                        </div>
                        <div class="signal-layers" id="macroLayers">Aktif Layer: 0/14</div>
                        <div class="signal-explanation" id="macroExplanation">-</div>
                    </div>
                </div>
            </div>

            <!-- CONSENSUS & ACTION -->
            <div class="consensus-section">
                <div class="consensus-card">
                    <h3>‚≠ê KONSENS√úS√ú</h3>
                    <div class="consensus-content">
                        <div class="consensus-direction" id="consensusDirection">HOLD</div>
                        <div class="consensus-bars">
                            <div class="consensus-metric">
                                <span>Genel G√º√ß</span>
                                <div class="consensus-bar-container">
                                    <div class="bar" id="consensusStrengthBar" style="width: 0%;"></div>
                                    <span id="consensusStrength">0%</span>
                                </div>
                            </div>
                            <div class="consensus-metric">
                                <span>Genel G√ºven</span>
                                <div class="consensus-bar-container">
                                    <div class="bar" id="consensusConfidenceBar" style="width: 0%;"></div>
                                    <span id="consensusConfidence">0%</span>
                                </div>
                            </div>
                        </div>
                        <div id="conflictWarning" class="conflict-warning" style="display: none;">
                            ‚ö†Ô∏è GRUP √áATI≈ûMASI TESPIT EDƒ∞LDƒ∞ - Dikkatli ol!
                        </div>
                    </div>
                </div>

                <!-- RISK & POSITION -->
                <div class="risk-card">
                    <h3>üí∞ POZƒ∞SYON & Rƒ∞SK</h3>
                    <div class="risk-content">
                        <div class="risk-item">
                            <span>Tavsiye Pozisyon (80x):</span>
                            <strong id="recommendedPosition">-</strong>
                        </div>
                        <div class="risk-item">
                            <span>Maksimum Kayƒ±p:</span>
                            <strong id="maxLoss">-</strong>
                        </div>
                        <div class="risk-item">
                            <span>Kelly Fraction:</span>
                            <strong id="kellyFraction">-</strong>
                        </div>
                        <button class="btn-action" id="actionButton" disabled>BEKLEME...</button>
                        <p class="info-text">Sinyal aldƒ±ktan sonra i≈ülem a√ß ve "+" tu≈üuna bas!</p>
                    </div>
                </div>
            </div>

            <!-- AI COMMENT -->
            <div class="ai-comment-section">
                <h3>ü§ñ YAPAy ZEKA YORUMU</h3>
                <div class="ai-comment-box" id="aiComment">
                    Sistem ba≈ülatƒ±lƒ±yor...
                </div>
            </div>
        </div>

        <!-- TAB: ANALƒ∞Z -->
        <div id="analysis" class="tab-content">
            <div class="analysis-grid">
                <div class="chart-container">
                    <h3>üìä 4-Grup Sinyal Daƒüƒ±lƒ±mƒ±</h3>
                    <canvas id="groupChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üìà Win Rate Oranlarƒ± (30 g√ºn)</h3>
                    <canvas id="winRateChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üíπ Toplam PnL Trendi</h3>
                    <canvas id="pnlChart"></canvas>
                </div>
                <div class="stats-container">
                    <h3>üìã ƒ∞statistikler</h3>
                    <div class="stats-grid" id="statsGrid">
                        <div class="stat-item">
                            <span>Toplam ƒ∞≈ülem</span>
                            <strong id="statTotalTrades">0</strong>
                        </div>
                        <div class="stat-item">
                            <span>Kazanan</span>
                            <strong id="statWinning">0</strong>
                        </div>
                        <div class="stat-item">
                            <span>Kaybeden</span>
                            <strong id="statLosing">0</strong>
                        </div>
                        <div class="stat-item">
                            <span>Ba≈üarƒ± Oranƒ±</span>
                            <strong id="statWinRate">0%</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: TARƒ∞H -->
        <div id="history" class="tab-content">
            <div class="history-toolbar">
                <input type="text" id="historyFilter" placeholder="Coin veya tarihe g√∂re filtrele...">
                <select id="historySort">
                    <option value="recent">En Yeni</option>
                    <option value="oldest">En Eski</option>
                    <option value="profit">K√¢rlƒ±</option>
                    <option value="loss">Zararlƒ±</option>
                </select>
            </div>
            <div class="history-table">
                <table>
                    <thead>
                        <tr>
                            <th>Coin</th>
                            <th>Y√∂n</th>
                            <th>Giri≈ü</th>
                            <th>√áƒ±kƒ±≈ü</th>
                            <th>PnL</th>
                            <th>ƒ∞≈ülem Durumu</th>
                            <th>Tarih</th>
                            <th>ƒ∞≈ülem</th>
                        </tr>
                    </thead>
                    <tbody id="historyBody">
                        <tr class="empty-state">
                            <td colspan="8">Hen√ºz i≈ülem kaydƒ± yok</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TAB: AYARLAR -->
        <div id="settings" class="tab-content">
            <div class="settings-grid">
                <div class="settings-section">
                    <h3>ƒ∞zlenen Coinler</h3>
                    <div id="trackedCoinsSettings" class="coins-settings">
                        <!-- Dinamik olarak doldurulacak -->
                    </div>
                    <div class="add-coin-form">
                        <input type="text" id="newCoinInput" placeholder="√ñrn: SOLUSDT">
                        <button class="btn-primary" onclick="addNewCoin()">Ekle</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Telegram Ayarlarƒ±</h3>
                    <div class="settings-item">
                        <label>
                            <input type="checkbox" id="telegramEnabled" checked>
                            Telegram Bildirimleri Aktif
                        </label>
                    </div>
                    <div class="settings-item">
                        <label>
                            <input type="checkbox" id="hourlyStatusEnabled" checked>
                            Saatlik Sistem Raporu
                        </label>
                    </div>
                    <p class="info-text">Telegram: Sinyal + Fiyat bilgileri + Sistem durumu</p>
                </div>

                <div class="settings-section">
                    <h3>Risk Y√∂netimi</h3>
                    <div class="settings-item">
                        <label>Leverage (BTC)</label>
                        <select id="leverageBTC">
                            <option>80x</option>
                            <option>50x</option>
                            <option>20x</option>
                        </select>
                        <span class="info-text">Tavsiye: 60 USD</span>
                    </div>
                    <div class="settings-item">
                        <label>Leverage (ETH)</label>
                        <select id="leverageETH">
                            <option>70x</option>
                            <option>50x</option>
                            <option>20x</option>
                        </select>
                        <span class="info-text">Tavsiye: 40-50 USD</span>
                    </div>
                    <div class="settings-item">
                        <label>Leverage (LTC)</label>
                        <select id="leverageLTC">
                            <option>50x</option>
                            <option>30x</option>
                            <option>20x</option>
                        </select>
                        <span class="info-text">Tavsiye: 40-50 USD</span>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Sistem Bilgisi</h3>
                    <div class="settings-item">
                        <span>Versiyon: <strong>v6.0</strong></span>
                    </div>
                    <div class="settings-item">
                        <span>Veri Kaynaƒüƒ±: <strong>Binance (PRIMARY) ‚Üí Bybit ‚Üí Coinbase</strong></span>
                    </div>
                    <div class="settings-item">
                        <span>Validasyon: <strong>Mock/Fake Detector AKTIF</strong></span>
                    </div>
                    <div class="settings-item">
                        <span>Son Senkronizasyon: <strong id="lastSync">-</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: COIN EKLE -->
    <div id="addCoinModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Yeni Coin Ekle</h3>
            <input type="text" id="addCoinInput" placeholder="√ñrn: SOLUSDT, BNBUSDT...">
            <div class="modal-buttons">
                <button class="btn-primary" onclick="confirmAddCoin()">Ekle</button>
                <button class="btn-secondary" onclick="closeModal()">ƒ∞ptal</button>
            </div>
        </div>
    </div>

    <!-- MODAL: TRADE A√á -->
    <div id="tradeModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>ƒ∞≈ülem A√ßƒ±ldƒ±</h3>
            <p>Bu sinyalƒ± Binance'de manuel a√ßtƒ±nƒ±z mƒ±?</p>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="confirmTradeOpen()">Evet, A√ßtƒ±m</button>
                <button class="btn-secondary" onclick="closeModal()">ƒ∞ptal</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
